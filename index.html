<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>cloud.ca API Documentation</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;go&quot;,&quot;hcl&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">curl</a>
              <a href="#" data-language-name="go">go</a>
              <a href="#" data-language-name="hcl">terraform</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id="getting-started">Getting started</h1>

<p>The cloud.ca API allows you to manage your environments and provision resources in a simple programmatic way using standard HTTP requests.</p>

<p>The API is  <a href="https://en.wikipedia.org/wiki/Representational_state_transfer">RESTful</a>. Responses, successful or not, are returned in <a href="http://www.json.org/">JSON</a>. Request bodies must be <a href="http://www.json.org/">JSON</a>, and should be made over SSL.</p>

<p>Current API version : <code class="prettyprint">api.cloud.ca/v1</code></p>

<p>We have also developed tools to help consume our APIs. If you use <code class="prettyprint">go</code>, check out our <a href="https://github.com/cloud-ca/go-cloudca">library</a>. If you use Terraform, check out our <a href="https://github.com/cloud-ca/terraform-cloudca">provider</a>. NB: both are being actively developed, so there is still some functionality missing.</p>

<h2 id="authentication">Authentication</h2>
<pre class="highlight go"><code><span class="k">import</span><span class="x"> </span><span class="s">"github.com/cloud-ca/go-cloudca"</span><span class="x">
</span><span class="n">ccaClient</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">cca</span><span class="o">.</span><span class="n">NewCcaClient</span><span class="p">(</span><span class="s">"[your-api-key]"</span><span class="p">)</span><span class="x">
</span></code></pre>
<pre class="highlight shell"><code><span class="c">## To authenticate, add a header</span>
<span class="c">## Make sure to replace `[your-api-key]` with your API key.</span>
curl <span class="s2">"https://api.cloud.ca/v1/organizations"</span> <span class="se">\</span>
   -H <span class="s2">"MC-Api-Key: [your-api-key]"</span>
</code></pre>
<pre class="highlight dart"><code><span class="n">provider</span> <span class="s">"cloudca"</span> <span class="o">{</span>
    <span class="n">api_key</span> <span class="o">=</span> <span class="s">"</span><span class="si">${var.my_api_key}</span><span class="s">"</span>
<span class="o">}</span>
</code></pre>

<p>API endpoints are secured by the same role-based access control (RBAC) as the cloud.ca portal. To identify who is making the requests, it is required to add a header to your HTTP requests:</p>

<p><code class="prettyprint">MC-Api-Key: [your-api-key]</code></p>

<aside class="notice">
You must replace <code>[your-api-key]</code> with your personal API key.
</aside>

<p>The API key is found from the API keys section under the user profile menu. If you don&rsquo;t see cloud.ca API keys section, contact your system administrator as you may not have the permission to see that section. <strong>Your API key carries the same privileges as your cloud.ca account, so be sure to keep it secret</strong>. If you think your API has been compromised, regenerate your API key from the API keys section.</p>

<h2 id="http-verbs">HTTP verbs</h2>

<p>The cloud.ca API can be used by any tool that is fluent in HTTP. The appropriate HTTP method should be used depending on the desired action.</p>

<table><thead>
<tr>
<th>Verbs</th>
<th>Purpose</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">GET</code></td>
<td>Used to retrieve information about a resource.</td>
</tr>
<tr>
<td><code class="prettyprint">POST</code></td>
<td>Used to create (or provision) a new resource or perform an operation on it.</td>
</tr>
<tr>
<td><code class="prettyprint">PUT</code></td>
<td>Used to update a resource.</td>
</tr>
<tr>
<td><code class="prettyprint">DELETE</code></td>
<td>Used to remove/delete a resource.</td>
</tr>
</tbody></table>

<h2 id="responses">Responses</h2>

<h3 id="success-response">Success response</h3>

<!--
```json
{
  "data": [
    { "_comment" : "JSON representation of first object goes here" },
    { "_comment" : "JSON representation of second object goes here" }
  ],
  "metadata": {
    "pageSize": 2,
    "pageCurrent": 1,
    "recordCount": 2,
    "sortField": "templateName",
    "sortOrder": "ASC"
  }
}
```
-->
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="nt">"_comment"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"JSON representation of first object goes here"</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="nt">"_comment"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"JSON representation of second object goes here"</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>When an API request is successful, the response body will contain the <code class="prettyprint">data</code> field:</p>

<table><thead>
<tr>
<th>Attributes</th>
<th>&nbsp;</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">data</code></td>
<td>The data field contains the object requested by the API caller</td>
</tr>
</tbody></table>

<!--
`metadata` | The metadata is an optionally returned field containing paging and sorting information
-->

<aside class="notice">
If the response does <strong>not</strong> contain the &ldquo;data&rdquo; field, the request was <strong>not</strong> successful
</aside>

<h3 id="error-response">Error response</h3>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">2012</span><span class="p">,</span><span class="w">
      </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cannot stop an instance that isn't in the running state"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"context"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4534cc36-bc46-48bc-ac5c-3ee4e42f0a44"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"currentState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Stopped"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"expectedStates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"Running"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"instances"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight go"><code><span class="n">_</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">ccaResources</span><span class="o">.</span><span class="n">Volumes</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"[some-volume-id]"</span><span class="p">)</span><span class="x">
</span><span class="k">if</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
   </span><span class="k">if</span><span class="x"> </span><span class="n">errorResponse</span><span class="p">,</span><span class="x"> </span><span class="n">ok</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">err</span><span class="o">.</span><span class="p">(</span><span class="n">api</span><span class="o">.</span><span class="n">CcaErrorResponse</span><span class="p">);</span><span class="x"> </span><span class="n">ok</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="k">if</span><span class="x"> </span><span class="n">errorResponse</span><span class="o">.</span><span class="n">StatusCode</span><span class="x"> </span><span class="o">==</span><span class="x"> </span><span class="n">api</span><span class="o">.</span><span class="n">NOT_FOUND</span><span class="x"> </span><span class="p">{</span><span class="x">
         </span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Volume was not found"</span><span class="p">)</span><span class="x">
      </span><span class="p">}</span><span class="x"> </span><span class="k">else</span><span class="x"> </span><span class="p">{</span><span class="x">
         </span><span class="c">//Can get more details from the CcaErrors</span><span class="x">
         </span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">errorResponse</span><span class="o">.</span><span class="n">Errors</span><span class="p">)</span><span class="x">
      </span><span class="p">}</span><span class="x">
   </span><span class="p">}</span><span class="x"> </span><span class="k">else</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="c">//handle unexpected error</span><span class="x">
      </span><span class="nb">panic</span><span class="p">(</span><span class="s">"Unexpected error"</span><span class="p">)</span><span class="x">
   </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>When an API request is unsuccessful, the response body will contain the <code class="prettyprint">errors</code> field :</p>

<table><thead>
<tr>
<th>Attributes</th>
<th>&nbsp;</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">errors</code></td>
<td>A list of errors objects that contain information about each error</td>
</tr>
</tbody></table>

<p>Each error has additional fields to describe it :</p>

<table><thead>
<tr>
<th>Attributes</th>
<th>&nbsp;</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">code</code></td>
<td>The cloud.ca error code</td>
</tr>
<tr>
<td><code class="prettyprint">message</code></td>
<td>A human readable explanation of the error code</td>
</tr>
<tr>
<td><code class="prettyprint">context</code></td>
<td>Additional information</td>
</tr>
</tbody></table>

<p>The HTTP status codes of error responses :</p>

<table><thead>
<tr>
<th>Status code</th>
<th>Reason</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">200</code></td>
<td>The request was successful.</td>
</tr>
<tr>
<td><code class="prettyprint">204</code></td>
<td>The request was successful and the response body is empty</td>
</tr>
<tr>
<td><code class="prettyprint">400</code></td>
<td>Bad request &ndash; Occurs when invalid parameters are provided or when quota limit is exceeded.</td>
</tr>
<tr>
<td><code class="prettyprint">403</code></td>
<td>Forbidden &ndash; Not authorized to perform this request.</td>
</tr>
<tr>
<td><code class="prettyprint">404</code></td>
<td>Not Found &ndash; Cannot locate the specified endpoint.</td>
</tr>
<tr>
<td><code class="prettyprint">405</code></td>
<td>Method not allowed &ndash; Cannot use that HTTP verb on the specified endpoint.</td>
</tr>
<tr>
<td><code class="prettyprint">500</code></td>
<td>An unexpected error occurred.</td>
</tr>
</tbody></table>

<!--
## Paging & sorting
All `GET` endpoints returning a list of objects support pagination. The desired page of result is specified by providing the following HTTP query parameters:

Name | Description
------------------- | -----------
`page_number` | The page of data to retrieve
`page_size` | The number of items to display per page
`sort_by` | The field name to sort by
`sort_order` | The sort order (ASC or DESC)
-->

          <h1 id="administration-api">Administration API</h1>

<p>The following sections describe the various endpoints exposed by cloud.ca to manage customer&rsquo;s configuration and interact with various core functionality of the system. Using these, you can automate various workflows without having to log into the portal, or simply integrate different aspects of cloud.ca with your own toolchain.
<aside class="notice">
If you are not familiar with the cloud.ca API response structures, it would be valuable to read <a href="#responses">this</a> first.
</aside></p>

              <h2 id="service-connections">Service connections</h2>

<p>Service connections are the services that you can create resources for (e.g. compute, object storage). <a href="#environments">Environments</a> are created for a specific service which allows you to create and manage resources within that service.</p>

<!---- The service APIs are documented [here](#serviceApis) ---->

<!-------------------- LIST ORGANIZATIONS -------------------->

<h3 id="list-service-connections">List service connections</h3>

<p><code class="prettyprint">GET /services/connections</code></p>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:[{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adfbdb51-493b-45b1-8802-3f6327afb9e6"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"serviceCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"compute-qc"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Compute - Québec"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CloudCA"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IAAS"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">  
      </span><span class="nt">"lastUpdated"</span><span class="p">:</span><span class="w"> </span><span class="mi">1478897488000</span><span class="p">,</span><span class="w">
      </span><span class="nt">"reachable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight go"><code><span class="n">ccaClient</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">cca</span><span class="o">.</span><span class="n">NewCcaClient</span><span class="p">(</span><span class="s">"[your-api-key]"</span><span class="p">)</span><span class="x">
</span><span class="n">serviceConnection</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">ccaClient</span><span class="o">.</span><span class="n">ServiceConnections</span><span class="o">.</span><span class="n">List</span><span class="p">()</span><span class="x">
</span></code></pre>

<table><thead>
<tr>
<th>Attributes</th>
<th>&nbsp;</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">id</code><br/><em>UUID</em></td>
<td>The id of the service connection</td>
</tr>
<tr>
<td><code class="prettyprint">serviceCode</code><br/><em>string</em></td>
<td>The service code of the service connection. It is used in the endpoint of the services API.</td>
</tr>
<tr>
<td><code class="prettyprint">name</code><br/><em>string</em></td>
<td>The name of the service connection</td>
</tr>
<tr>
<td><code class="prettyprint">type</code><br/><em>string</em></td>
<td>The type of the service connection.</td>
</tr>
<tr>
<td><code class="prettyprint">category</code><br/><em>string</em></td>
<td>The category of the service connection.</td>
</tr>
<tr>
<td><code class="prettyprint">status</code><br/><em>Object</em></td>
<td>Status of the service connection. Tells you if the service is up.<br/><em>includes</em>: <code class="prettyprint">lastUpdated</code>, <code class="prettyprint">reachable</code></td>
</tr>
</tbody></table>

<!-------------------- GET ORGANIZATION -------------------->

<h3 id="retrieve-a-service-connection">Retrieve a service connection</h3>

<p><code class="prettyprint">GET /services/connections/:id</code></p>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:[{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adfbdb51-493b-45b1-8802-3f6327afb9e6"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"serviceCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"compute-qc"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Compute - Québec"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CloudCA"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IAAS"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">  
      </span><span class="nt">"lastUpdated"</span><span class="p">:</span><span class="w"> </span><span class="mi">1478897488000</span><span class="p">,</span><span class="w">
      </span><span class="nt">"reachable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight go"><code><span class="n">ccaClient</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">cca</span><span class="o">.</span><span class="n">NewCcaClient</span><span class="p">(</span><span class="s">"[your-api-key]"</span><span class="p">)</span><span class="x">
</span><span class="n">serviceConnections</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">ccaClient</span><span class="o">.</span><span class="n">ServiceConnections</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"[service-connection-id]"</span><span class="p">)</span><span class="x">
</span></code></pre>

<table><thead>
<tr>
<th>Attributes</th>
<th>&nbsp;</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">id</code><br/><em>UUID</em></td>
<td>The id of the service connection</td>
</tr>
<tr>
<td><code class="prettyprint">serviceCode</code><br/><em>string</em></td>
<td>The service code of the service connection. It is used in the endpoint of the services API.</td>
</tr>
<tr>
<td><code class="prettyprint">name</code><br/><em>string</em></td>
<td>The name of the service connection</td>
</tr>
<tr>
<td><code class="prettyprint">type</code><br/><em>string</em></td>
<td>The type of the service connection.</td>
</tr>
<tr>
<td><code class="prettyprint">category</code><br/><em>string</em></td>
<td>The category of the service connection.</td>
</tr>
<tr>
<td><code class="prettyprint">status</code><br/><em>Object</em></td>
<td>Status of the service connection. Tells you if the service is up.<br/><em>includes</em>: <code class="prettyprint">lastUpdated</code>, <code class="prettyprint">reachable</code></td>
</tr>
</tbody></table>

              <h2 id="organizations">Organizations</h2>

<p>Organizations are the largest logical grouping of users, environments and resources available in cloud.ca. Each organization is isolated from other organizations. It has its own subdomain (<code class="prettyprint">[entryPoint].cloud.ca</code>) and is protected by its own customizable system <a href="#roles">roles</a>. An administrator that must manage it&rsquo;s sub-organizations environments or provisioned resources can do so by having the <code class="prettyprint">Access other levels</code> permission. Additionally, provisioned resource usage is metered at the organization level facilitating cost tracking.</p>

<!-------------------- LIST ORGANIZATIONS -------------------->

<h3 id="list-organizations">List organizations</h3>

<p><code class="prettyprint">GET /organizations</code></p>

<p>Retrieves a list of organizations visible to the caller. In most cases, only the caller&rsquo;s organization will be returned. However if the caller&rsquo;s organization has sub-organizations, and the caller has the <code class="prettyprint">Access other levels</code> permission, the sub-organizations will be returned as well.</p>
<pre class="highlight go"><code><span class="c">// List organizations</span><span class="x">
</span><span class="n">ccaClient</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">cca</span><span class="o">.</span><span class="n">NewCcaClient</span><span class="p">(</span><span class="s">"[your-api-key]"</span><span class="p">)</span><span class="x">
</span><span class="n">organizations</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">ccaClient</span><span class="o">.</span><span class="n">Organizations</span><span class="o">.</span><span class="n">List</span><span class="p">()</span><span class="x">
</span></code></pre>
<pre class="highlight shell"><code><span class="c"># Retrieve visible organizations</span>
curl <span class="s2">"https://api.cloud.ca/v1/organizations"</span> <span class="se">\</span>
   -H <span class="s2">"MC-Api-Key: [your-api-key]"</span>

<span class="c"># Response body example</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"03bc22bd-adc4-46b8-988d-afddc24c0cb5"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Umbrella Corporation"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"entryPoint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"umbrella"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"parent"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8e3393ce-ee63-4f32-9e0f-7b0200fa655a"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Capcom"</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="nt">"environments"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
               </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9df14056-51e2-4000-ab14-beeaa488500d"</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">],</span><span class="w">
         </span><span class="nt">"roles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
               </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cdaaa9d0-304e-4063-b1ab-de31905bdab8"</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">],</span><span class="w">
         </span><span class="nt">"serviceConnections"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
               </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"11607a49-9691-40fe-8022-2e148bc0d720"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"serviceCode"</span><span class="p">:</span><span class="s2">"compute-qc"</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">],</span><span class="w">
         </span><span class="nt">"users"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
               </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"0c3ffcce-a98d-4159-b6fc-04edd34e89b7"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"userName"</span><span class="p">:</span><span class="s2">"wbirkin"</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th>Attributes</th>
<th>&nbsp;</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">id</code><br/><em>UUID</em></td>
<td>&mdash;</td>
</tr>
<tr>
<td><code class="prettyprint">name</code><br/><em>string</em></td>
<td>&mdash;</td>
</tr>
<tr>
<td><code class="prettyprint">entryPoint</code><br/><em>string</em></td>
<td>The entry point of the organization is the subdomain of the organization in the cloud.ca URL : <code class="prettyprint">[entryPoint].cloud.ca</code></td>
</tr>
<tr>
<td><code class="prettyprint">parent</code><br/><em><a href="#organizations">Organization</a></em></td>
<td>If the organization is a sub-organization, it will have it&rsquo;s <code class="prettyprint">parent</code> organization. <em>includes</em>:<code class="prettyprint">id</code>,<code class="prettyprint">name</code></td>
</tr>
<tr>
<td><code class="prettyprint">environments</code><br/><em>Array[<a href="#environments">Environment</a>]</em></td>
<td>The environments belonging to the organization<br/><em>includes</em>: <code class="prettyprint">id</code></td>
</tr>
<tr>
<td><code class="prettyprint">roles</code><br/><em>Array[<a href="#roles">Role</a>]</em></td>
<td>The system and environments roles belonging to the organization<br/><em>includes</em>: <code class="prettyprint">id</code></td>
</tr>
<tr>
<td><code class="prettyprint">serviceConnections</code><br/><em>Array[<a href="#service-connections">ServiceConnection</a>]</em></td>
<td>The services for which the organization is allowed to provision resources<br/><em>includes</em>: <code class="prettyprint">id</code>,<code class="prettyprint">serviceCode</code></td>
</tr>
<tr>
<td><code class="prettyprint">users</code><br/><em>Array[<a href="#users">User</a>]</em></td>
<td>The users of the organization<br/><em>includes</em>: <code class="prettyprint">id</code></td>
</tr>
</tbody></table>

<!-------------------- FIND ORGANIZATION -------------------->

<h3 id="retrieve-an-organization">Retrieve an organization</h3>

<p><code class="prettyprint">GET /organizations/:id</code></p>

<p>Retrieve an organization&rsquo;s details</p>
<pre class="highlight shell"><code><span class="c"># Retrieve an organization</span>
curl <span class="s2">"https://api.cloud.ca/v1/organizations/[id]"</span> <span class="se">\</span>
   -H <span class="s2">"MC-Api-Key: [your-api-key]"</span>

<span class="c"># Response body example</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"03bc22bd-adc4-46b8-988d-afddc24c0cb5"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Nintendo US"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"entryPoint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nintendo-us"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"parent"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8e3393ce-ee63-4f32-9e0f-7b0200fa655a"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Nintendo"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"environments"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
         </span><span class="p">{</span><span class="w">
           </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9df14056-51e2-4000-ab14-beeaa488500d"</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nt">"roles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
         </span><span class="p">{</span><span class="w">
           </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cdaaa9d0-304e-4063-b1ab-de31905bdab8"</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nt">"serviceConnections"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"11607a49-9691-40fe-8022-2e148bc0d720"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"serviceCode"</span><span class="p">:</span><span class="s2">"compute-qc"</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nt">"users"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"0c3ffcce-a98d-4159-b6fc-04edd34e89b7"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"userName"</span><span class="p">:</span><span class="s2">"reggie"</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th>Attributes</th>
<th>&nbsp;</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">id</code><br/><em>UUID</em></td>
<td>&mdash;</td>
</tr>
<tr>
<td><code class="prettyprint">name</code><br/><em>string</em></td>
<td>&mdash;</td>
</tr>
<tr>
<td><code class="prettyprint">entryPoint</code><br/><em>string</em></td>
<td>The entry point of the organization is the subdomain of the organization in the cloud.ca URL :<br/><code class="prettyprint">[entryPoint].cloud.ca</code></td>
</tr>
<tr>
<td><code class="prettyprint">parent</code><br/><em><a href="#organizations">Organization</a></em></td>
<td>If the organization is a sub-organization, it will have it&rsquo;s <code class="prettyprint">parent</code> organization. <em>includes</em>:<code class="prettyprint">id</code>,<code class="prettyprint">name</code></td>
</tr>
<tr>
<td><code class="prettyprint">environments</code><br/><em>Array[<a href="#environments">Environment</a>]</em></td>
<td>The environments belonging to the organization<br/><em>includes</em>: <code class="prettyprint">id</code></td>
</tr>
<tr>
<td><code class="prettyprint">roles</code><br/><em>Array[<a href="#roles">Role</a>]</em></td>
<td>The system and environments roles belonging to the organization<br/><em>includes</em>: <code class="prettyprint">id</code></td>
</tr>
<tr>
<td><code class="prettyprint">serviceConnections</code><br/><em>Array[<a href="#service-connections">ServiceConnection</a>]</em></td>
<td>The services for which the organization is allowed to provision resources<br/><em>includes</em>: <code class="prettyprint">id</code>,<code class="prettyprint">serviceCode</code></td>
</tr>
<tr>
<td><code class="prettyprint">users</code><br/><em>Array[<a href="#users">User</a>]</em></td>
<td>The users of the organization<br/><em>includes</em>: <code class="prettyprint">id</code></td>
</tr>
</tbody></table>

<!-------------------- CREATE ORGANIZATION -------------------->

<h3 id="create-organization">Create organization</h3>

<p><code class="prettyprint">POST /organizations</code></p>

<p>Creates a new organization as a sub-organization of the caller&rsquo;s organization, or a sub-organization of the specified <code class="prettyprint">parent</code>. The caller requires the <code class="prettyprint">Organizations create</code> permission.</p>
<pre class="highlight shell"><code><span class="c"># Create an organization</span>
curl -X POST <span class="s2">"https://api.cloud.ca/v1/organizations"</span> <span class="se">\</span>
   -H <span class="s2">"MC-Api-Key: [your-api-key]"</span> <span class="se">\</span>
   -d <span class="s2">"[request_body]"</span>

<span class="c"># Request body example</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"entryPoint"</span><span class="p">:</span><span class="s2">"umbrella"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"Umbrella Corp"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"serviceConnections"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"9acb3b76-d5d0-420c-b075-ef320b7e5a3e"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="nt">"parent"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"bc0ceecf-feb5-412c-ab6e-a8df8eb7fbbd"</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th>Required</th>
<th>&nbsp;</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">name</code><br/><em>string</em></td>
<td>The name of the organization. (Add info about restrictions)</td>
</tr>
<tr>
<td><code class="prettyprint">entryPoint</code><br/><em>string</em></td>
<td>The entry point of the organization is the subdomain of the organization in the cloud.ca URL : <code class="prettyprint">[entryPoint].cloud.ca</code></td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Optional</th>
<th>&nbsp;</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">serviceConnections</code><br/>Array[<a href="#service-connections">ServiceConnection</a>]</td>
<td>A list of service connections for which the organization may provision resources.<br/><em>required :</em><code class="prettyprint">id</code></td>
</tr>
<tr>
<td><code class="prettyprint">parent</code><br/><a href="#organization">Organization</a></td>
<td>The organization that will be the parent of the new organization. By default, it will default to the caller&rsquo;s organization.<br/><em>required :</em><code class="prettyprint">id</code></td>
</tr>
</tbody></table>

<h5 id="returns">Returns</h5>

<p>The responses&rsquo; <code class="prettyprint">data</code> field contains the created <a href="#organizations">organization</a> with it&rsquo;s <code class="prettyprint">id</code>.</p>

<!-------------------- UPDATE ORGANIZATION -------------------->

<h3 id="update-organization">Update organization</h3>

<p><code class="prettyprint">PUT /organizations/:id</code></p>

<p>Update an organization. It&rsquo;s parent organization cannot be changed. It can be assigned service connections</p>
<pre class="highlight shell"><code><span class="c"># Update an organization</span>
curl -X PUT <span class="s2">"https://api.cloud.ca/v1/organizations/[id]"</span> <span class="se">\</span>
   -H <span class="s2">"MC-Api-Key: [your-api-key]"</span> <span class="se">\</span>
   -d <span class="s2">"[request_body]"</span>

<span class="c"># Request body example</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"entryPoint"</span><span class="p">:</span><span class="s2">"umbrella"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"Umbrella Corp"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"serviceConnections"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"9acb3b76-d5d0-420c-b075-ef320b7e5a3e"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th>Required</th>
<th>&nbsp;</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">name</code><br/><em>string</em></td>
<td>The name of the organization. (Add info about restrictions)</td>
</tr>
<tr>
<td><code class="prettyprint">entryPoint</code><br/><em>string</em></td>
<td>The entry point of the organization is the subdomain of the organization in the cloud.ca URL : <code class="prettyprint">[entryPoint].cloud.ca</code></td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Optional</th>
<th>&nbsp;</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">serviceConnections</code><br/>Array[<a href="#service-connections">ServiceConnection</a>]</td>
<td>A list of service connections for which the organization may provision resources. The caller must have access to all connections that are provided. <strong>NB :</strong> Service connection access may be added but not revoked at this time.<br/><em>required :</em> <code class="prettyprint">id</code></td>
</tr>
</tbody></table>

<h4 id="returns">Returns</h4>

<p>The responses&rsquo; <code class="prettyprint">data</code> field contains the updated <a href="#organizations">organization</a>.</p>

<!-------------------- DELETE ORGANIZATION -------------------->

<h3 id="delete-organization">Delete organization</h3>

<p><code class="prettyprint">DELETE /organizations/:id</code></p>

<p>Delete an organization. The caller may not delete his own organization. Also, an organization may not be deleted if it has sub-organizations.</p>
<pre class="highlight shell"><code><span class="c"># Delete an organization</span>
curl -X DELETE <span class="s2">"https://api.cloud.ca/v1/organizations/[id]"</span> <span class="se">\</span>
   -H <span class="s2">"MC-Api-Key: [your-api-key]"</span>
</code></pre>

<h4 id="returns">Returns</h4>

<p>Returns an HTTP status code 204, with an empty response body.</p>

              <h2 id="users">Users</h2>

<p>A user account allows users to authenticate to an <a href="#organizations">organization</a> and to have access to the resources in it. You can restrict user access to the system and environments by assigning them specific <a href="#roles">roles</a>. Additionally, every user is given an API key which is needed to use our APIs. All operations done by users are persisted and can be accessed through the activity log.</p>

<!-------------------- LIST USERS -------------------->

<h3 id="list-users">List users</h3>

<p><code class="prettyprint">GET /users</code></p>
<pre class="highlight shell"><code><span class="c"># Retrieve visible users</span>

curl <span class="s2">"https://api.cloud.ca/v1/users"</span> <span class="se">\</span>
   -H <span class="s2">"MC-Api-Key: [your-api-key]"</span>

<span class="c"># Response body example</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:[{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e83540c7-75a0-4715-96dc-c10a364e0390"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"userName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"habsgoalie123"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Carey"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Price"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gohabsgo@cloud.ca"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"creationDate"</span><span class="p">:</span><span class="w"> </span><span class="mi">1476796926000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACTIVE"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8e3393ce-ee63-4f32-9e0f-7b0200fa655a"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Canadiens"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"roles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cdaaa9d0-304e-4063-b1ab-de31905bdab8"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"End-User"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fe6d2614-3c33-447c-96f2-c79f67f5fd19"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Environment Admin"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"environment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"afcafd98-0287-4139-bb77-f29ab0549eaa"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight go"><code><span class="n">ccaClient</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">cca</span><span class="o">.</span><span class="n">NewCcaClient</span><span class="p">(</span><span class="s">"[your-api-key]"</span><span class="p">)</span><span class="x">
</span><span class="n">users</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">ccaClient</span><span class="o">.</span><span class="n">Users</span><span class="o">.</span><span class="n">List</span><span class="p">()</span><span class="x">
</span></code></pre>

<p>Retrieve information about users you have access to. If you want access to other users in your <a href="#organizations">organization or sub-organizations</a>, you will need to be assigned the <code class="prettyprint">Users read</code> permission. Without this permission, you will only see your own user in the list.</p>

<table><thead>
<tr>
<th>Attributes</th>
<th>&nbsp;</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">id</code><br/><em>UUID</em></td>
<td>The id of the user</td>
</tr>
<tr>
<td><code class="prettyprint">userName</code><br/><em>string</em></td>
<td>The username of the user</td>
</tr>
<tr>
<td><code class="prettyprint">firstName</code><br/><em>string</em></td>
<td>The first name of the user</td>
</tr>
<tr>
<td><code class="prettyprint">lastName</code><br/><em>string</em></td>
<td>The last name of the user</td>
</tr>
<tr>
<td><code class="prettyprint">email</code><br/><em>string</em></td>
<td>The email of the user</td>
</tr>
<tr>
<td><code class="prettyprint">creationDate</code><br/><em>long</em></td>
<td>The date in <a href="https://en.wikipedia.org/wiki/Unix_time">unix time</a> that the user was created</td>
</tr>
<tr>
<td><code class="prettyprint">status</code><br/><em>string</em></td>
<td>The current status of the user.</td>
</tr>
<tr>
<td><code class="prettyprint">organization</code><br/><em><a href="#organization">Organization</a></em></td>
<td>The organization to which the user belongs</td>
</tr>
<tr>
<td><code class="prettyprint">roles</code><br/><em>Array[<a href="#roles">Role</a>]</em></td>
<td>The system and environments roles that are assigned to the user<br/><em>includes</em>: <code class="prettyprint">id</code>, <code class="prettyprint">name</code> and <code class="prettyprint">environment.id</code></td>
</tr>
</tbody></table>

<!-------------------- GET USER -------------------->

<h3 id="retrieve-a-user">Retrieve a user</h3>

<p><code class="prettyprint">GET /users/:id</code></p>
<pre class="highlight shell"><code><span class="c"># Retrieve visible user</span>

curl <span class="s2">"https://api.cloud.ca/v1/users/[user-id]"</span> <span class="se">\</span>
   -H <span class="s2">"MC-Api-Key: [your-api-key]"</span>

<span class="c"># Response body example</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fdf60a19-980d-4380-acab-914485111305"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"userName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"frodo"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Frodo"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Baggins"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"frodo@cloud.ca"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"creationDate"</span><span class="p">:</span><span class="w"> </span><span class="mi">1476796926000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACTIVE"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c64dcd1d-9123-45e5-ad00-5d635c49176b"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The Shire"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"environments"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55724a36-4817-4cd3-927e-57d8a8b41eb8"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hobbiton"</span><span class="w">
    </span><span class="p">}],</span><span class="w">
    </span><span class="nt">"roles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f0a4f20-3537-4bcd-81fe-2b74fd4c07e0"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"End-User"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0b9159cd-81ac-48d1-be8a-7595a1617c94"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Read-Only"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"environment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55724a36-4817-4cd3-927e-57d8a8b41eb8"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight go"><code><span class="n">ccaClient</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">cca</span><span class="o">.</span><span class="n">NewCcaClient</span><span class="p">(</span><span class="s">"[your-api-key]"</span><span class="p">)</span><span class="x">
</span><span class="n">user</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">ccaClient</span><span class="o">.</span><span class="n">Users</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"[user-id]"</span><span class="p">)</span><span class="x">
</span></code></pre>

<p>Retrieve information about a specific user. If you want access to other users in your <a href="#organizations">organization or sub-organizations</a>, you will need to be assigned the <code class="prettyprint">Users Read</code> permission.</p>

<table><thead>
<tr>
<th>Attributes</th>
<th>&nbsp;</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">id</code><br/><em>UUID</em></td>
<td>The id of the user</td>
</tr>
<tr>
<td><code class="prettyprint">userName</code><br/><em>string</em></td>
<td>The username of the user</td>
</tr>
<tr>
<td><code class="prettyprint">firstName</code><br/><em>string</em></td>
<td>The first name of the user</td>
</tr>
<tr>
<td><code class="prettyprint">lastName</code><br/><em>string</em></td>
<td>The last name of the user</td>
</tr>
<tr>
<td><code class="prettyprint">email</code><br/><em>string</em></td>
<td>The email of the user</td>
</tr>
<tr>
<td><code class="prettyprint">creationDate</code><br/><em>long</em></td>
<td>The date in <a href="https://en.wikipedia.org/wiki/Unix_time">unix time</a> that the user was created</td>
</tr>
<tr>
<td><code class="prettyprint">status</code><br/><em>string</em></td>
<td>The current status of the user.</td>
</tr>
<tr>
<td><code class="prettyprint">organization</code><br/><em><a href="#organization">Organization</a></em></td>
<td>The organization to which the user belongs</td>
</tr>
<tr>
<td><code class="prettyprint">environments</code><br/><em>Array[<a href="#environments">Environment</a>]</em></td>
<td>The environments the user is member of<br/><em>includes</em>: <code class="prettyprint">id</code>, <code class="prettyprint">name</code></td>
</tr>
<tr>
<td><code class="prettyprint">roles</code><br/><em>Array[<a href="#roles">Role</a>]</em></td>
<td>The system and environments roles that are assigned to the user<br/><em>includes</em>: <code class="prettyprint">id</code>, <code class="prettyprint">name</code> and <code class="prettyprint">environment.id</code></td>
</tr>
</tbody></table>

<!-------------------- CREATE USER -------------------->

<h3 id="create-user">Create user</h3>

<p><code class="prettyprint">POST /users</code></p>
<pre class="highlight shell"><code><span class="c"># Create a user</span>

curl <span class="s2">"https://api.cloud.ca/v1/users"</span> <span class="se">\</span>
   -X POST -H <span class="s2">"MC-Api-Key: [your-api-key]"</span> -d <span class="s2">"[request-body]"</span>

<span class="c"># Request body example</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"userName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vader42"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Anakin"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Skywalker"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vader42@cloud.ca"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"645cf4ce-3699-40c5-a1a8-0b3e945f49ee"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"roles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dd01c908-371c-4ec5-9fd7-80b1bfac8975"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Create a user in a specific organization. There&rsquo;s two different types of <a href="#roles">role</a> you can assign to the user. A system role will determine the set of system permissions the user will have. An environment role will give the user access to an environment and will determine what he can see and do in that environment. You will need the <code class="prettyprint">Create a new user</code> permission to execute this operation.</p>

<table><thead>
<tr>
<th>Required</th>
<th>&nbsp;</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">userName</code><br/><em>string</em></td>
<td>Username of the new user. Should be unique across the organization.</td>
</tr>
<tr>
<td><code class="prettyprint">firstName</code><br/><em>string</em></td>
<td>First name of the user</td>
</tr>
<tr>
<td><code class="prettyprint">lastName</code><br/><em>string</em></td>
<td>Last name of the user</td>
</tr>
<tr>
<td><code class="prettyprint">email</code><br/><em>string</em></td>
<td>Email of the user. Should be unique across the organization.</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Optional</th>
<th>&nbsp;</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">organization</code></br><em><a href="#organization">Organization</a></em></td>
<td>Organization in which the user will be created. <em>Defaults to your organization</em><br/><em>required:</em> <code class="prettyprint">id</code></td>
</tr>
<tr>
<td><code class="prettyprint">roles</code><br/><em>Array[<a href="#roles">Role</a>]</em></td>
<td>The system and environment roles to give to the user<br/><em>required</em>: <code class="prettyprint">id</code></td>
</tr>
</tbody></table>

<h5 id="returns">Returns</h5>

<p>The responses&rsquo; <code class="prettyprint">data</code> field contains the created <a href="#users">user</a> with it&rsquo;s <code class="prettyprint">id</code>.</p>

<!-------------------- UPDATE USER -------------------->

<h3 id="update-user">Update user</h3>

<p><code class="prettyprint">PUT /users/:id</code></p>
<pre class="highlight shell"><code><span class="c"># Create a user</span>

curl <span class="s2">"https://api.cloud.ca/v1/users/[user-id]"</span> <span class="se">\</span>
   -X PUT -H <span class="s2">"MC-Api-Key: [your-api-key]"</span> -d <span class="s2">"[request-body]"</span>

<span class="c"># Request body example</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"userName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"spidey1"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Peter"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Parker"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"spidey1@cloud.ca"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"roles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dd01c908-371c-4ec5-9fd7-80b1bfac8975"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Update a specific user. It is important to note that updating the list of roles will override the previous one. You will the <code class="prettyprint">Users update</code> permission to execute this operation.</p>

<table><thead>
<tr>
<th>Optional</th>
<th>&nbsp;</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">userName</code><br/><em>string</em></td>
<td>The new username of the user. Should be unique across the organization.</td>
</tr>
<tr>
<td><code class="prettyprint">firstName</code><br/><em>string</em></td>
<td>The new first name of the user</td>
</tr>
<tr>
<td><code class="prettyprint">lastName</code><br/><em>string</em></td>
<td>The new last name of the user</td>
</tr>
<tr>
<td><code class="prettyprint">email</code><br/><em>string</em></td>
<td>The new email of the user. Should be unique across the organization.</td>
</tr>
<tr>
<td><code class="prettyprint">roles</code><br/><em>Array[<a href="#roles">Role</a>]</em></td>
<td>The new list of system or environment roles to give to the user. This will override the previous list of roles.<br/><em>required</em>: <code class="prettyprint">id</code></td>
</tr>
</tbody></table>

<h5 id="returns">Returns</h5>

<p>The responses&rsquo; <code class="prettyprint">data</code> field contains the updated <a href="#users">user</a>.</p>

<!-------------------- DELETE USER -------------------->

<h3 id="delete-user">Delete user</h3>

<p><code class="prettyprint">DELETE /users/:id</code></p>
<pre class="highlight shell"><code><span class="c"># Delete a user</span>

curl <span class="s2">"https://api.cloud.ca/v1/users/[user-id]"</span> <span class="se">\</span>
   -X DELETE -H <span class="s2">"MC-Api-Key: [your-api-key]"</span>

</code></pre>

<p>Delete a specific user. You will need the <code class="prettyprint">Delete an existing user</code> permission to execute this operation.</p>

<!-------------------- UNLOCK USER -------------------->

<h3 id="unlock-user">Unlock user</h3>

<p><code class="prettyprint">POST /users/:id/unlock</code></p>
<pre class="highlight shell"><code><span class="c"># Unlock a user that was locked from the system</span>

curl <span class="s2">"https://api.cloud.ca/v1/users/[user-id]/unlock"</span> <span class="se">\</span>
   -X POST -H <span class="s2">"MC-Api-Key: [your-api-key]"</span>

</code></pre>

<p>A user with 10 consecutive unsuccessful logins will be automatically locked by our system. This API can be used to unlock a user in this situation. You will need the <code class="prettyprint">Unlock user</code> permission to execute this operation.</p>

              <h2 id="environments">Environments</h2>

<p>Environments allow you to manage resources of a specific service and to manage your <a href="#users">users&rsquo;</a> access to them. With <a href="#roles">environment roles</a>, you have tight control of what a user is allowed to do in your environment. A general use case of environments is to split your resources into different <a href="https://en.wikipedia.org/wiki/Deployment_environment">deployment environments</a> (e.g. dev, staging and production). The advantage is that resources of different deployments are isolated from each other and you can restrict user access to your most critical resources.</p>

<!-------------------- LIST ENVIRONMENTS -------------------->

<h3 id="list-environments">List environments</h3>

<p><code class="prettyprint">GET /environments</code></p>
<pre class="highlight shell"><code><span class="c"># Retrieve visible environments</span>
curl <span class="s2">"https://api.cloud.ca/v1/environments"</span> <span class="se">\</span>
   -H <span class="s2">"MC-Api-Key: [your-api-key]"</span>

<span class="c"># Response body example</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1ee5cd43-8395-4cd5-a20f-0f1e83b7f8bd"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cheyenne_mountain"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Environment for base at Cheyenne Mountain"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"membership"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MANY_USERS"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"creationDate"</span><span class="p">:</span><span class="w"> </span><span class="mi">1474986518000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a9f93785-0545-4876-8241-3b19b9a86721"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sg1"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"entryPoint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sg1"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"serviceConnection"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adfbdb51-493b-45b1-8802-3f6327afb9e6"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Compute - Québec"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"roles"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"951b768b-e91c-4d20-8b52-d4a2ab5a538a"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Environment Admin"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"isDefault"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"users"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9f84a6ce-7be1-4a08-a25b-edc6e57fb7e3"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jack_oneill"</span><span class="w">
      </span><span class="p">}]</span><span class="w">
    </span><span class="p">}]</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight go"><code><span class="n">ccaClient</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">cca</span><span class="o">.</span><span class="n">NewCcaClient</span><span class="p">(</span><span class="s">"[your-api-key]"</span><span class="p">)</span><span class="x">
</span><span class="n">environments</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">ccaClient</span><span class="o">.</span><span class="n">Environments</span><span class="o">.</span><span class="n">List</span><span class="p">()</span><span class="x">
</span></code></pre>

<p>List environments that you have access to. It will only return environments that you&rsquo;re member of if you&rsquo;re not assigned the <code class="prettyprint">Environments read</code> permission.</p>

<table><thead>
<tr>
<th>Attributes</th>
<th>&nbsp;</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">id</code><br/><em>UUID</em></td>
<td>The id of the environment</td>
</tr>
<tr>
<td><code class="prettyprint">name</code><br/><em>string</em></td>
<td>The name of the environment</td>
</tr>
<tr>
<td><code class="prettyprint">description</code><br/><em>string</em></td>
<td>The description of the environment</td>
</tr>
<tr>
<td><code class="prettyprint">membership</code><br/><em>string</em></td>
<td>Type of membership of the environment. (e.g. ALL_ORG_USERS, MANY_USERS)</td>
</tr>
<tr>
<td><code class="prettyprint">creationDate</code><br/><em>long</em></td>
<td>The date in <a href="https://en.wikipedia.org/wiki/Unix_time">unix time</a> that the environment was created</td>
</tr>
<tr>
<td><code class="prettyprint">organization</code><br/><em><a href="#organizations">Organization</a></em></td>
<td>The organization of the environment<br/><em>includes</em>: <code class="prettyprint">id</code>, <code class="prettyprint">name</code>, <code class="prettyprint">entryPoint</code></td>
</tr>
<tr>
<td><code class="prettyprint">serviceConnection</code><br/><em><a href="#service-connections">ServiceConnection</a></em></td>
<td>The service connection of the environment<br/><em>includes</em>: <code class="prettyprint">id</code>, <code class="prettyprint">name</code></td>
</tr>
<tr>
<td><code class="prettyprint">roles</code><br/><em>Array[<a href="#roles">Role</a>]</em></td>
<td>The roles of the environment with all the users assigned to them.<br/><em>includes</em>: <code class="prettyprint">id</code>, <code class="prettyprint">name</code>, <code class="prettyprint">isDefault</code>, <code class="prettyprint">users.id</code>, <code class="prettyprint">users.name</code></td>
</tr>
</tbody></table>

<!-------------------- GET ENVIRONMENT -------------------->

<h3 id="retrieve-an-environment">Retrieve an environment</h3>

<p><code class="prettyprint">GET /environments/:id</code></p>
<pre class="highlight shell"><code><span class="c"># Retrieve visible environment</span>

curl <span class="s2">"https://api.cloud.ca/v1/environment/[environment-id]"</span> <span class="se">\</span>
   -H <span class="s2">"MC-Api-Key: [your-api-key]"</span>

<span class="c"># Response body example</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"487a2745-bb8a-44bc-adb1-e3b048f6def2"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"galactica"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Environment for the Galactica"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"membership"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MANY_USERS"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"creationDate"</span><span class="p">:</span><span class="w"> </span><span class="mi">1474986518000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a3340a89-8f60-407d-8a49-f5cfe81eef8f"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kobol"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"entryPoint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kobol"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"serviceConnection"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adfbdb51-493b-45b1-8802-3f6327afb9e6"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Compute - Québec"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"users"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6e84ab70-4c62-4db1-bbd8-343636a34647"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"userName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"starbuck"</span><span class="w">
    </span><span class="p">}],</span><span class="w">
    </span><span class="nt">"roles"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b04b8a7c-6e89-4dba-9734-74d9f1b7be04"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Environment Admin"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"isDefault"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"users"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6e84ab70-4c62-4db1-bbd8-343636a34647"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"starbuck"</span><span class="w">
      </span><span class="p">}]</span><span class="w">
    </span><span class="p">}]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight go"><code><span class="n">ccaClient</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">cca</span><span class="o">.</span><span class="n">NewCcaClient</span><span class="p">(</span><span class="s">"[your-api-key]"</span><span class="p">)</span><span class="x">
</span><span class="n">environment</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">ccaClient</span><span class="o">.</span><span class="n">Environments</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"[environment-id]"</span><span class="p">)</span><span class="x">
</span></code></pre>

<p>Retrieve an environment you have access to. You can always retrieve environments that you&rsquo;re member of but to access other environments you will need the <code class="prettyprint">Environments read</code> permission.</p>

<table><thead>
<tr>
<th>Attributes</th>
<th>&nbsp;</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">id</code><br/><em>UUID</em></td>
<td>The id of the environment</td>
</tr>
<tr>
<td><code class="prettyprint">name</code><br/><em>string</em></td>
<td>The name of the environment</td>
</tr>
<tr>
<td><code class="prettyprint">description</code><br/><em>string</em></td>
<td>The description of the environment</td>
</tr>
<tr>
<td><code class="prettyprint">membership</code><br/><em>string</em></td>
<td>Type of membership of the environment. (e.g. ALL_ORG_USERS, MANY_USERS)</td>
</tr>
<tr>
<td><code class="prettyprint">creationDate</code><br/><em>long</em></td>
<td>The date in <a href="https://en.wikipedia.org/wiki/Unix_time">unix time</a> that the environment was created</td>
</tr>
<tr>
<td><code class="prettyprint">organization</code><br/><em><a href="#organizations">Organization</a></em></td>
<td>The organization of the environment<br/><em>includes</em>: <code class="prettyprint">id</code>, <code class="prettyprint">name</code>, <code class="prettyprint">entryPoint</code></td>
</tr>
<tr>
<td><code class="prettyprint">serviceConnection</code><br/><em><a href="#service-connections">ServiceConnection</a></em></td>
<td>The service connection of the environment<br/><em>includes</em>: <code class="prettyprint">id</code>, <code class="prettyprint">name</code></td>
</tr>
<tr>
<td><code class="prettyprint">users</code><br/><em>Array[<a href="#users">User</a>]</em></td>
<td>The users that are members of the environment<br/><em>includes</em>: <code class="prettyprint">id</code>, <code class="prettyprint">username</code></td>
</tr>
<tr>
<td><code class="prettyprint">roles</code><br/><em>Array[<a href="#roles">Role</a>]</em></td>
<td>The roles of the environment with all the users assigned to them.<br/><em>includes</em>: <code class="prettyprint">id</code>, <code class="prettyprint">name</code>, <code class="prettyprint">isDefault</code>, <code class="prettyprint">users.id</code>, <code class="prettyprint">users.name</code></td>
</tr>
</tbody></table>

<!-------------------- CREATE ENVIRONMENT -------------------->

<h3 id="create-environment">Create environment</h3>

<p><code class="prettyprint">POST /environments</code></p>
<pre class="highlight shell"><code><span class="c"># Create an environment</span>

curl <span class="s2">"https://api.cloud.ca/v1/environments"</span> <span class="se">\</span>
   -X POST -H <span class="s2">"MC-Api-Key: [your-api-key]"</span>

<span class="c"># Request body example</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"glados"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Environment property of Aperture Science"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"membership"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MANY_USERS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2fd60d6f-1fee-4fe5-8ec6-46d8776acc6f"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"serviceConnection"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7f0fa906-490a-467b-bc44-e2382d43015e"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"roles"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Environment Admin"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"isDefault"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"users"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"73b17dab-1705-45f1-84e2-997e2af5641b"</span><span class="w">
    </span><span class="p">}]</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight go"><code><span class="n">ccaClient</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">cca</span><span class="o">.</span><span class="n">NewCcaClient</span><span class="p">(</span><span class="s">"[your-api-key]"</span><span class="p">)</span><span class="x">
</span><span class="n">environment</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">ccaClient</span><span class="o">.</span><span class="n">Environments</span><span class="o">.</span><span class="n">Create</span><span class="p">(</span><span class="n">configuration</span><span class="o">.</span><span class="n">Environment</span><span class="p">{</span><span class="x">
  </span><span class="n">Name</span><span class="o">:</span><span class="x"> </span><span class="s">"[environment-name]"</span><span class="p">,</span><span class="x">
  </span><span class="n">Description</span><span class="o">:</span><span class="x"> </span><span class="s">"[environment-description]"</span><span class="p">,</span><span class="x">
  </span><span class="n">ServiceConnection</span><span class="o">:</span><span class="x"> </span><span class="n">configuration</span><span class="o">.</span><span class="n">ServiceConnection</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">Id</span><span class="o">:</span><span class="x"> </span><span class="s">"[service-connection-id]"</span><span class="p">,</span><span class="x">
  </span><span class="p">},</span><span class="x">
  </span><span class="n">Organization</span><span class="o">:</span><span class="x"> </span><span class="n">configuration</span><span class="o">.</span><span class="n">Organization</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">Id</span><span class="o">:</span><span class="x"> </span><span class="s">"[organization-id]"</span><span class="p">,</span><span class="x">
  </span><span class="p">},</span><span class="x">
  </span><span class="n">Roles</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="n">configuration</span><span class="o">.</span><span class="n">Role</span><span class="p">{</span><span class="x">
    </span><span class="n">Id</span><span class="o">:</span><span class="x"> </span><span class="s">"[role-id]"</span><span class="p">,</span><span class="x">
    </span><span class="n">Users</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="n">configuration</span><span class="o">.</span><span class="n">User</span><span class="p">{</span><span class="x">
      </span><span class="n">Id</span><span class="o">:</span><span class="x"> </span><span class="s">"[user-id]"</span><span class="p">,</span><span class="x">
    </span><span class="p">}],</span><span class="x">
  </span><span class="p">}],</span><span class="x">
</span><span class="p">})</span><span class="x">
</span></code></pre>
<pre class="highlight dart"><code><span class="n">resource</span> <span class="s">"cloudca_environment"</span> <span class="s">"my_environment"</span> <span class="o">{</span>
    <span class="n">service_code</span> <span class="o">=</span> <span class="s">"compute-qc"</span>
    <span class="n">organization_code</span> <span class="o">=</span> <span class="s">"kamar-taj"</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s">"production"</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s">"Environment for production workloads"</span>
    <span class="n">admin_role</span> <span class="o">=</span> <span class="o">[</span><span class="s">"pat"</span><span class="o">]</span>
    <span class="n">read_only_role</span> <span class="o">=</span> <span class="o">[</span><span class="s">"dr_strange"</span><span class="o">,</span><span class="s">"ancient_one"</span><span class="o">]</span>
<span class="o">}</span>
</code></pre>

<p>Create a new environment in a specific service and organization. You will need the <code class="prettyprint">Environments create</code> permission to execute this operation.</p>

<table><thead>
<tr>
<th>Required</th>
<th>&nbsp;</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">name</code><br/><em>string</em></td>
<td>The name of the new environment. Should be unique in the environment and only contain lower case characters, numbers, dashes and underscores.</td>
</tr>
<tr>
<td><code class="prettyprint">description</code><br/><em>string</em></td>
<td>The description of the new environment.</td>
</tr>
<tr>
<td><code class="prettyprint">serviceConnection</code><br/><em><a href="#service-connections">ServiceConnection</a></em></td>
<td>The service connection that the environment should be created in<br/><em>required</em>: <code class="prettyprint">id</code></td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Optional</th>
<th>&nbsp;</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">organization</code><br/><em><a href="#organizations">Organization</a></em></td>
<td>The organization that the environment should be created in. <em>Defaults to your organization</em><br/><em>required</em>: <code class="prettyprint">id</code></td>
</tr>
<tr>
<td><code class="prettyprint">membership</code><br/><em>string</em></td>
<td>Type of membership of the environment. ALL_ORG_USERS will add every user in the organization to this environment with the default role. MANY_USERS will allow you to  choose the users you want in the environment and assigned them specific roles. <em>Defaults to MANY_USERS</em></td>
</tr>
<tr>
<td><code class="prettyprint">roles</code><br/><em>Array[<a href="#roles">Role</a>]</em></td>
<td>The roles of the environment and the users assigned to them. Also, defines the default role of the environment.<br/><em>required</em>: <code class="prettyprint">name</code>, <code class="prettyprint">users.id</code><br/><em>optional</em>: <code class="prettyprint">isDefault</code></td>
</tr>
</tbody></table>

<h5 id="returns">Returns</h5>

<p>The responses&rsquo; <code class="prettyprint">data</code> field contains the updated <a href="#environments">environment</a>.</p>

<!-------------------- UPDATE ENVIRONMENT -------------------->

<h3 id="update-environment">Update environment</h3>

<p><code class="prettyprint">PUT /environments/:id</code></p>
<pre class="highlight shell"><code><span class="c"># Update an environment</span>

curl <span class="s2">"https://api.cloud.ca/v1/environments/[environment-id]"</span> <span class="se">\</span>
   -X PUT -H <span class="s2">"MC-Api-Key: [your-api-key]"</span> -d <span class="s2">"[request-body]"</span>

<span class="c"># Request body example</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"skynet-beta"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Environment for the Skynet project"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"roles"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f9dea588-d7ab-4f42-b6e6-4b85f273f3db"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"users"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"07e02355-d05b-47cf-860d-f69cf0432276"</span><span class="w">
    </span><span class="p">}]</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight go"><code><span class="n">ccaClient</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">cca</span><span class="o">.</span><span class="n">NewCcaClient</span><span class="p">(</span><span class="s">"[your-api-key]"</span><span class="p">)</span><span class="x">
</span><span class="n">environment</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">ccaClient</span><span class="o">.</span><span class="n">Environments</span><span class="o">.</span><span class="n">Update</span><span class="p">(</span><span class="n">configuration</span><span class="o">.</span><span class="n">Environment</span><span class="p">{</span><span class="x">
  </span><span class="n">Name</span><span class="o">:</span><span class="x"> </span><span class="s">"[environment-name]"</span><span class="p">,</span><span class="x">
  </span><span class="n">Description</span><span class="o">:</span><span class="x"> </span><span class="s">"[environment-description]"</span><span class="p">,</span><span class="x">
  </span><span class="n">Roles</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="n">configuration</span><span class="o">.</span><span class="n">Role</span><span class="p">{</span><span class="x">
    </span><span class="n">Id</span><span class="o">:</span><span class="x"> </span><span class="s">"[role-id]"</span><span class="p">,</span><span class="x">
    </span><span class="n">Users</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="n">configuration</span><span class="o">.</span><span class="n">User</span><span class="p">{</span><span class="x">
      </span><span class="n">Id</span><span class="o">:</span><span class="x"> </span><span class="s">"[user-id]"</span><span class="p">,</span><span class="x">
    </span><span class="p">}],</span><span class="x">
  </span><span class="p">}],</span><span class="x">
</span><span class="p">})</span><span class="x">
</span></code></pre>

<table><thead>
<tr>
<th>Optional</th>
<th>&nbsp;</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">name</code><br/><em>string</em></td>
<td>The updated name of the environment. Should be unique in the environment and only contain lower case characters, numbers, dashes and underscores.</td>
</tr>
<tr>
<td><code class="prettyprint">description</code><br/><em>string</em></td>
<td>The updated description of the environment</td>
</tr>
<tr>
<td><code class="prettyprint">membership</code><br/><em>string</em></td>
<td>Type of membership of the environment. ALL_ORG_USERS will add every user in the organization to this environment with the default role. MANY_USERS will allow you to  choose the users you want in the environment and assigned them specific roles. <em>Defaults to MANY_USERS</em></td>
</tr>
<tr>
<td><code class="prettyprint">roles</code><br/><em>Array[<a href="#roles">Role</a>]</em></td>
<td>Update the users roles in the environment. Also, can also update the default role.<br/><em>required</em>: <code class="prettyprint">name</code>, <code class="prettyprint">users.id</code><br/><em>optional</em>: <code class="prettyprint">isDefault</code></td>
</tr>
</tbody></table>

<p>You will need the <code class="prettyprint">Environments update</code> permission to execute this operation.</p>

<!-------------------- DELETE ENVIRONMENT -------------------->

<h3 id="delete-environment">Delete environment</h3>

<p><code class="prettyprint">DELETE /environments/:id</code></p>
<pre class="highlight shell"><code><span class="c"># Delete an environment</span>

curl <span class="s2">"https://api.cloud.ca/v1/environments/[environment-id]"</span> <span class="se">\</span>
   -X DELETE -H <span class="s2">"MC-Api-Key: [your-api-key]"</span>

</code></pre>
<pre class="highlight go"><code><span class="n">ccaClient</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">cca</span><span class="o">.</span><span class="n">NewCcaClient</span><span class="p">(</span><span class="s">"[your-api-key]"</span><span class="p">)</span><span class="x">
</span><span class="n">deleted</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">ccaClient</span><span class="o">.</span><span class="n">Environments</span><span class="o">.</span><span class="n">Delete</span><span class="p">(</span><span class="s">"[environment-id]"</span><span class="p">)</span><span class="x">
</span></code></pre>

<p>Delete a specific environment. You will need a <a href="#roles">role</a> with the <code class="prettyprint">Delete an existing environment</code> permission to execute this operation.</p>

<aside class="warning">
  Be careful: This will destroy all the resources in your environment.
</aside>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">curl</a>
                <a href="#" data-language-name="go">go</a>
                <a href="#" data-language-name="hcl">terraform</a>
          </div>
      </div>
    </div>
  </body>
</html>
